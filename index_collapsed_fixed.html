<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>CareSens Air • Farmacias por Región</title>
<style>
  :root{--bg:#f7f7fb;--card:#fff;--text:#111827;--muted:#6b7280;--brand:#0369a1}
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,sans-serif}
  .wrap{max-width:960px;margin:auto;padding:20px}
  header{display:flex;gap:12px;flex-wrap:wrap;align-items:center;justify-content:space-between}
  h1{font-size:clamp(22px,3vw,30px);margin:0}
  .sub{color:var(--muted)}
  .controls{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-top:8px}
  input[type="search"]{padding:10px 12px;border:1px solid #e5e7eb;border-radius:12px;background:#fff;min-width:260px}
  main{margin-top:18px;display:grid;gap:16px}
  .card{background:var(--card);border-radius:16px;box-shadow:0 8px 22px rgba(0,0,0,.06)}
  details.region{border:1px solid #e5e7eb;border-radius:16px;overflow:hidden}
  details.region > summary{padding:14px 16px;cursor:pointer;font-weight:600;list-style:none;outline:none}
  details.region[open] > summary{background:#f9fafb}
  .list{padding:12px 16px 16px 16px;display:grid;gap:10px}
  .item{border:1px solid #e5e7eb;border-radius:14px;padding:12px}
  .item b{display:block;margin-bottom:4px}
  .muted{color:#6b7280}
  .btn{display:inline-block;padding:8px 10px;border-radius:10px;text-decoration:none;border:1px solid #e5e7eb}
  .btn.primary{background:var(--brand);color:#fff;border-color:transparent}
  .empty{color:var(--muted);padding:12px 16px;text-align:center}
  footer{color:var(--muted);text-align:center;margin-top:16px}
  .toolbar{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div>
      <h1>Encuentra tu sensor <span style="color:var(--brand)">CareSens Air</span></h1>
      <div class="sub">Explora por región y abre cada farmacia en Google Maps.</div>
    </div>
    <div class="controls toolbar">
      <input id="q" type="search" placeholder="Buscar farmacia o dirección…" />
      <button id="expandAll">Abrir todo</button>
      <button id="collapseAll">Cerrar todo</button>
    </div>
  </header>

  <main id="regions"></main>

  <footer class="sub">
    ¿No encuentras tu farmacia? Escríbenos y te ayudamos a ubicar el <b>CareSens Air</b> más cercano.
  </footer>
</div>

<script>
  const DATA = {"Región de Metropolitana": [{"name": "L0212_San Damian 20", "address": "San Damián N° 20 (Urgencia)"}, {"name": "L0272_Av. Los Leones 1.178", "address": "Los Leones N° 1160 (Urgencia)"}, {"name": "L0024_Apumanque L 232", "address": "Manquehue Sur N° 31 Local 232,194,196 / Apumanque"}, {"name": "L0285_La Dehesa 457", "address": "Av. La Dehesa 457"}, {"name": "L0360_Mc Donalds Pajaritos", "address": "Avenida Los Pajaritos N°7001, Pudahuel"}, {"name": "L0351_Vitacura Kentucky (Reemplazo Vitac", "address": "Av. Vitacura N° 6345, Vitacura (Urgencia)"}, {"name": "L0347_Los Presidentes / Consistorial", "address": "Av. Consistorial N°3349, Local 1, Peñalolén"}, {"name": "L0336_Gran Avenida Con San Nicolas", "address": "Gran Avenida N° 5001, San Miguel"}, {"name": "L0659_Mall Plaza Norte Huechuraba", "address": "Avda. Vespucio N°1737, Local H-104, Huechuraba"}, {"name": "L0748", "address": "Vitacura 3619, Vitacura"}, {"name": "L0008_Jumbo Alto Las Condes", "address": "Kennedy N° 9001 Local 1072 / Alto Las Condes"}, {"name": "L0317_Americo Vespucio Norte Nº 2515", "address": "Avda. Americo Vespucio Norte 2515 esq. Fco. De Aguirre, Vitacura"}, {"name": "L0722", "address": "Republica 342"}, {"name": "L0058_Colon 5097", "address": "Av. Cristobal Colón nº 5090 (Urgencia)"}, {"name": "L0089_Shell Caren", "address": "Ruta 68 Km. 18,5 Lo Aguirre / Shell"}, {"name": "L0201_V.Mackenna 9587", "address": "Av. Vicuña Mackenna N° 9521"}, {"name": "L0098_P.Valdivia-D.Oriente", "address": "Av. Pedro de Valdivia Nº 2523 / Diagonal Oriente"}, {"name": "L0358 Los Dominicos", "address": "Camino El Alba N°11969, Local 301 Las Condes"}, {"name": "L0618_Las Hualtatas con G.de Alderete", "address": "Gerónimo de Alderete N° 1291, Vitacura"}, {"name": "L0292_Santa Amalia Esq. La Florida", "address": "Av. La Florida 9497 (Santa Amalia) (Urgencia)"}, {"name": "L0069_Ahumada 266", "address": "Paseo Ahumada 226"}, {"name": "L0091_Luis Pasteur/Lo Arcaya", "address": "Luis Pasteur N°5875/ Lo Arcaya"}, {"name": "L0593_Jumbo San Bernardo", "address": "Av. Portales Nº 3698, local N°1236."}, {"name": "L0002_Jumbo Bilbao", "address": "Bilbao N° 4144 Local 200, Jumbo Bilbao"}, {"name": "L0453_Lider Puente Nuevo", "address": "Av. Las Condes N° 12916, Lo Barnechea"}, {"name": "L0284_Macul 2555", "address": "Av. Macul N°2555 / Gregorio de la Fuente (Urgencia)"}, {"name": "L0652_Tottus Vivaceta", "address": "Av. Fermín Vivaceta 1018-1030 L8 y 9, Independecia"}, {"name": "L0399_Lider El Bosque", "address": "Riquelme N°69, El Bosque"}, {"name": "L0656 Costanera Center Spa, Providencia", "address": "Av. Andres Bello 2447, Local 192 (Costanera Center )"}, {"name": "L0015_Irarrazaval 4221", "address": "Irarrázaval N° 4221 / Juan Moya (Urgencia)"}, {"name": "L0350_Nataniel N° 620 (Supermercado S", "address": "Nataniel Cox 620, Locales 1-2-3"}, {"name": "L0011_Parque Arauco", "address": "Kennedy N° 5413 Local 230 / Parque Arauco"}, {"name": "L0551_", "address": "Americo Vespucio 1501 Local 270-274"}, {"name": "L0081_Ramón Freire 2340 Maipu", "address": "Av. Pajaritos N° 2340"}, {"name": "L0203_Bilbao-Holanda", "address": "Av. Francisco Bilbao 2489 / Holanda"}, {"name": "L0553_Salvador con Sucre", "address": "Av.Salvador 1866, Local 1(esquina Sucre)"}, {"name": "L0300_Los Trapenses 3515", "address": "Av. Los Trapenses 3515"}, {"name": "L0237_Jumbo La Florida", "address": "Av. Vicuña Mackenna N° 6100 L. 102 (Jumbo La Florida)"}, {"name": "L0343_Av.Chicureo El Castillito Pc 13", "address": "Camino Chicureo Esq. Los Ingleses Local 1, Chicureo"}, {"name": "L0243_Mall La Dehesa", "address": "Avda. El Rodeo N° 12.850, Local 45 al 47"}, {"name": "L0239_P.Hurtado/Bilbao", "address": "Avda. Francisco Bilbao N°8898 (Portal la Reina), local 3061"}, {"name": "L0525_Calle Bernardino Bravo 115, Buin,", "address": "Bernardino Bravo N°0115"}, {"name": "L0439_Lider La Serena", "address": "Av. Francisco de Aguirre N°2"}, {"name": "L0032_Luis Carrera 2215", "address": "Luis Carrera N° 2215 / Candelaria Goyenechea"}, {"name": "L0467_NEPTUNO N°720", "address": "Av. Neptuno N° 720, Lo Prado"}, {"name": "L0337_Los Militares / Nuestra Señora Del", "address": "Los Militares N° 6872, local 9, Las Condes"}, {"name": "L0520_Av.Camino de las Flores 20217, Pud", "address": "Camino las Flores 20217, Ciudad de los Valles"}, {"name": "L0644_Balmaceda, Buin", "address": "Calle Jose Manuel Balmaceda N° 124 Local 1, Buin."}, {"name": "L0517_Camino El Alba Nº 11969, TrasCajas", "address": "Camino el Alba Nº11.969, Local 104 - Interior Jumbo"}, {"name": "L0524_Av.Sánchez Fontecilla 12000 L/1061", "address": "Av. Mariano Sanchez Fontecilla N° 12.000, local 1061 (Jumbo Peñalolén)"}], "Región de Valparaíso": [{"name": "L0145_Libertad 335 Viña", "address": "Av. Libertad N°335 (Urgencia)"}, {"name": "L0669_Lider Peñablanca", "address": "Camino Troncal N°1561, Local 1, Peñablanca"}, {"name": "L0549_El Belloto Mall, Quilpué", "address": "Avenida Ramón Freire N° 2414, Local N° 1082, Portal El Belloto"}, {"name": "L0583_Shell Placilla", "address": "Caletera N° 1502, Local 3. Ruta 68 Placilla"}, {"name": "L0537_Domingo Ortiz de Rozas 476 L/ 2y3", "address": "Domingo Ortiz de Rosas N° 476 Local 2 y 3"}, {"name": "L0219_Mall Quilpué", "address": "Diego Portales N° 802 Loc. 3 Mall Plaza El Sol"}, {"name": "L0149_Prat 798 S.Felipe", "address": "Arturo Prat Nº 798"}, {"name": "Lautaro 78-Ruta 60ch 13420 _L0684", "address": "Lautaro 78 Local 1-2, La Calera"}], "Región de Magallanes (y de la Antártica Chilena)": [{"name": "L0233_Bories 950 P.Arenas", "address": "Gobernador Carlos Gories 950 - 958"}, {"name": "L0241_A.España 1405 P. Arenas", "address": "Avda. España 01405-A"}, {"name": "L0367_Puerto Natales", "address": "Manuel Bulnes Nº 599, Puerto Natales"}], "Región de Aysén(Aysén del General Carlos Ibáñez del Campo)": [{"name": "L0330_Fco Bilbao 307 (Esq Partt) Coyhaiq", "address": "Bilbao N° 317, Coyhaique"}], "Región de O'Higgins (Libertador General Bernardo O’Higgins)": [{"name": "L0535_Avda. San Juan N°113B-113C-113D, M", "address": "Avda. San Juan N°113B-113C-113D, Machalí"}, {"name": "L0623_Tottus Concón", "address": "Avenida Manantiales Nº 955, local 104."}, {"name": "L0400_Lider Rancagua", "address": "Av. Eduardo Frei Montalva N° 190, Rancagua"}, {"name": "L0698_Dunas Concon", "address": "Av. Gaston Hamel Nieto N°527 lote 6 La foresta de la Costa II Reñaca, local 121"}], "Región de Antofagasta": [{"name": "L0121_Prat 605 Antof.", "address": "Arturo Prat Nº 605"}, {"name": "L0124_Zenteno 21 Antofagasta", "address": "Zenteno N° 21 Local 1, Megamercado Líder"}, {"name": "L0617_Stripcenter Arauco Express, Antofa", "address": "Av Edmundo Perez Zujovic N° 5470"}, {"name": "L0258_Balmaceda 3242 Calama", "address": "Mall Calama (Av. Balmaceda N° 3242 / Loc. A120-124-120b)"}, {"name": "L0589_Punto Encuentro Antofagasta", "address": "Pedro Aguirre Cerda Nº 9400."}], "Región de Maule": [{"name": "L0581_Jumbo Talca", "address": "El Arenal #411, talca local 1027"}, {"name": "L0171_Independencia 535 Linares", "address": "Independencia nº 535"}, {"name": "L0361_Parral", "address": "Aníbal Pinto N° 640, Parral"}, {"name": "L0172_Peña 724 Curico", "address": "Peña nº 724"}, {"name": "L0349_Jesus Pons N° 409 Curico", "address": "Jesús Pons 409, Curicó"}, {"name": "L0402_Lider Curico", "address": "Carmen 1190-1196 Local 101-125"}], "Región de Biobío": [{"name": "L0191_Colon 8961 Talcahuano", "address": "Av. Colón N° 8961 / Nueva Imperial"}, {"name": "L0276_Mall El Trebol Talcahuano", "address": "J. Alessandri  3177 (Mall El Trebol)"}, {"name": "L0195_Irarraz 501 Concepcion", "address": "Juan Bosco N° 501 (Urgencia)"}, {"name": "L0240_Barros 724 Concepcion", "address": "Barros Arana nº 724 - 734"}, {"name": "L0280_San Pedro Concepcion", "address": "Michimalonco N°1120, locales 1 y 2"}, {"name": "L0033_El Bosque 164", "address": "Av. El Bosque N° 164 / Lota"}], "Región de Los Ríos": [{"name": "L0702_Plaza de los Rios", "address": "Calle Arauco 561 local 144"}, {"name": "L0444_Lider Valdivia", "address": "Buera 1400, Valdivia"}], "Región de Los Lagos": [{"name": "L0221_Mall Puerto Montt", "address": "Juan Soler Manfredini N°51, Local 114 y 115 (Mall Paseo Costanera)"}, {"name": "L0450 San Francisco 350 Puerto Varas", "address": "San Francisco 350"}, {"name": "L0443_Lider Puerto Montt", "address": "Av. Parque Industrial N° 400, interior Sup. Lider Puerto Montt"}], "Región de La Araucanía": [{"name": "L0744_", "address": "Av. Pablo Neruda 01725, Local 3"}, {"name": "L0320_Av. Alemania 0671, Local 2086", "address": "Avda. Alemania 0671, piso 2, Local N° 2086"}, {"name": "L0622_Stripcenter Los Pablos, Temuco", "address": "Los Pablos  N° 1880, local 9"}, {"name": "L0492_LAGOS Nº 567 VICTORIA", "address": "Lagos N° 567, Victoria"}], "Región de Coquimbo": [{"name": "L0134_Cordovez 631 Serena", "address": "Cordovez 631-651"}, {"name": "L0232_Mall La Serena", "address": "Alberto Solari N°1400, Local 2021 y 2025"}, {"name": "L0567_Líder 4 Esquinas, La Serena", "address": "Avda. Guillermo Ulriksen 3128 Local # 2"}, {"name": "L0441_Lider Coquimbo", "address": "Av. Domeyko N° 55 local 1, Coquimbo"}, {"name": "L0137_Shell La Serena", "address": "Balmaceda N° 3463"}, {"name": "L0474_Líder Balmaceda (La Serena)", "address": "Av. Balmaceda N° 2154, La Serena"}], "Región de Atacama": [{"name": "L0621_Lider Copiapo", "address": "Avda. Los Carrera Nº 3791/esq. El Inca. Interior Sup. Líder."}], "Región de Ñuble": [{"name": "L0478_Av Collin Nº 698 Chillan", "address": "Av. Collín N° 698, Chillán"}]};

  function mapsUrl(address){
    const q = encodeURIComponent(address);
    return `https://www.google.com/maps/search/?api=1&query=${q}`;
  }

  const regionsEl = document.getElementById('regions');
  const q = document.getElementById('q');

  function render(filter=""){
    regionsEl.innerHTML = "";
    const filterLC = filter.trim().toLowerCase();
    const regions = Object.keys(DATA).sort();
    regions.forEach(region=>{
      const list = DATA[region] || [];
      const sorted = list.slice().sort((a,b)=> (a.name||'').localeCompare(b.name||''));
      const filtered = sorted.filter(f=> {
        if(!filterLC) return true;
        return (f.name||"").toLowerCase().includes(filterLC) ||
               (f.address||"").toLowerCase().includes(filterLC) ||
               region.toLowerCase().includes(filterLC);
      });
      if(!filtered.length) return;
      const det = document.createElement('details');
      det.className = 'region card';
      // Por defecto contraído (no seteamos det.open)
      const sum = document.createElement('summary');
      sum.innerHTML = `${region} <span class="muted">(${filtered.length})</span>`;
      det.appendChild(sum);

      const cont = document.createElement('div');
      cont.className = 'list';
      filtered.forEach(f=>{
        const row = document.createElement('div');
        row.className = 'item';
        row.innerHTML = `
          <b>${f.name || ""}</b>
          ${f.address ? `<div class="muted">${f.address}</div>` : ""}
          <div style="margin-top:8px">
            <a class="btn primary" target="_blank" rel="noreferrer" href="${mapsUrl(f.address || f.name)}">Ver en Google Maps</a>
          </div>
        `;
        cont.appendChild(row);
      });
      det.appendChild(cont);
      regionsEl.appendChild(det);
    });

    if(!regionsEl.children.length){
      const p = document.createElement('div');
      p.className = 'empty card';
      p.textContent = 'No hay resultados para tu búsqueda.';
      regionsEl.appendChild(p);
    }
  }

  // Abrir/Cerrar todo
  document.getElementById('expandAll').addEventListener('click', ()=>{
    regionsEl.querySelectorAll('details.region').forEach(d=> d.open = true);
  });
  document.getElementById('collapseAll').addEventListener('click', ()=>{
    regionsEl.querySelectorAll('details.region').forEach(d=> d.open = false);
  });

  q.addEventListener('input', ()=> render(q.value));
  render();
</script>
</body>
</html>
