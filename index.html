<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>CareSens Air en Farmacias Ahumada</title>
<style>
  :root { --brand:#0ea5e9; --brand-600:#0284c7; --ring:rgba(14,165,233,.25);
          --bg:#f6f7fb; --text:#0f172a; --muted:#64748b; --card:#fff; }
  *{box-sizing:border-box}
  html,body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial,sans-serif}
  .wrap{max-width:1080px;margin:0 auto;padding:20px}
  .hero{background:linear-gradient(180deg,#fff,#f8fafc);border-radius:20px;padding:18px;box-shadow:0 14px 40px rgba(2,8,23,.06)}
  .brand{display:flex;gap:14px;align-items:center;justify-content:space-between}
  .brand img{height:52px;width:auto;object-fit:contain}
  h1{font-size:clamp(22px,3.2vw,34px);line-height:1.15;margin:0;text-align:center}
  .sub{color:#6b7280;text-align:center;margin-top:6px}
  .toolbar{display:flex;flex-wrap:wrap;gap:10px;align-items:center;margin-top:14px;justify-content:center}
  input[type="search"]{padding:12px 14px;border:1px solid #e2e8f0;border-radius:12px;min-width:260px;outline:none;background:#fff}
  input[type="search"]:focus{border-color:var(--brand);box-shadow:0 0 0 4px var(--ring)}
  .btn{display:inline-block;padding:9px 12px;border-radius:10px;text-decoration:none;border:1px solid #e2e8f0;background:var(--brand);color:#fff}
  main{margin-top:18px;display:grid;gap:16px}
  details.region{background:var(--card);border:1px solid #e5e7eb;border-radius:16px;overflow:hidden;box-shadow:0 12px 28px rgba(2,8,23,.06)}
  details.region>summary{padding:16px;cursor:pointer;list-style:none;font-weight:700;display:flex;align-items:center;justify-content:space-between;gap:12px}
  details.region[open]>summary{background:#f8fafc}
  .pill{font-weight:600;color:#0f172a;background:#eef2ff;padding:6px 10px;border-radius:999px;font-size:12px}
  .list{padding:12px 16px 16px 16px;display:grid;gap:10px}
  .item{border:1px solid #e5e7eb;border-radius:14px;padding:12px;background:#fff}
  .item b{display:block;margin-bottom:4px}
  .muted{color:#64748b}
</style>
</head>
<body>
<div class="wrap">
  <section class="hero">
    <div class="brand">
      <img src="logo.png" alt="i-SENS" onerror="this.style.display='none'"/>
      <div style="flex:1">
        <h1>Encuentra tu sensor <span style="color:var(--brand)">CareSens Air</span> en Farmacias Ahumada</h1>
        <div class="sub">Busca por regiÃ³n y abre cada farmacia en Google Maps.</div>
        <div style="text-align:center;margin-top:12px">
          <a class="btn" target="_blank" href="https://www.farmaciasahumada.cl/sensor-de-monitoreo-caresen-air-continuo-15-dia-1-un-95435.html">
            ğŸ›’ Comprar CareSens Air online en Farmacias Ahumada
          </a>
        </div>
      </div>
      <img src="logofa.svg" alt="Farmacias Ahumada" onerror="this.style.display='none'"/>
    </div>
    <div class="toolbar">
      <input id="q" type="search" placeholder="Buscar farmacia o direcciÃ³nâ€¦" />
      <button id="expandAll">Abrir todo</button>
      <button id="collapseAll">Cerrar todo</button>
    </div>
  </section>

  <main id="regions"></main>

  <footer class="sub" style="text-align:center;margin-top:18px">
    Â¿Tienes dudas con <b>CareSens Air</b>?<br>
    ContÃ¡ctanos al <a href="https://wa.me/56947383823" target="_blank">+56 9 4738 3823</a><br>
    Horario de atenciÃ³n: lunes a viernes, 09:00 a 17:30 hrs.
  </footer>
</div>

<script>
  const DATA = {"RegiÃ³n de Metropolitana": [{"name": "L0212_San Damian 20", "address": "San DamiÃ¡n NÂ° 20 (Urgencia)", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0272_Av. Los Leones 1.178", "address": "Los Leones NÂ° 1160 (Urgencia)", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0024_Apumanque L 232", "address": "Manquehue Sur NÂ° 31 Local 232,194,196 / Apumanque", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0285_La Dehesa 457", "address": "Av. La Dehesa 457", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0360_Mc Donalds Pajaritos", "address": "Avenida Los Pajaritos NÂ°7001, Pudahuel", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0351_Vitacura Kentucky (Reemplazo Vitac", "address": "Av. Vitacura NÂ° 6345, Vitacura (Urgencia)", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0347_Los Presidentes / Consistorial", "address": "Av. Consistorial NÂ°3349, Local 1, PeÃ±alolÃ©n", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0336_Gran Avenida Con San Nicolas", "address": "Gran Avenida NÂ° 5001, San Miguel", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0659_Mall Plaza Norte Huechuraba", "address": "Avda. Vespucio NÂ°1737, Local H-104, Huechuraba", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0748", "address": "Vitacura 3619, Vitacura", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0008_Jumbo Alto Las Condes", "address": "Kennedy NÂ° 9001 Local 1072 / Alto Las Condes", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0317_Americo Vespucio Norte NÂº 2515", "address": "Avda. Americo Vespucio Norte 2515 esq. Fco. De Aguirre, Vitacura", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0722", "address": "Republica 342", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0058_Colon 5097", "address": "Av. Cristobal ColÃ³n nÂº 5090 (Urgencia)", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0089_Shell Caren", "address": "Ruta 68 Km. 18,5 Lo Aguirre / Shell", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0201_V.Mackenna 9587", "address": "Av. VicuÃ±a Mackenna NÂ° 9521", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0098_P.Valdivia-D.Oriente", "address": "Av. Pedro de Valdivia NÂº 2523 / Diagonal Oriente", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0358 Los Dominicos", "address": "Camino El Alba NÂ°11969, Local 301 Las Condes", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0618_Las Hualtatas con G.de Alderete", "address": "GerÃ³nimo de Alderete NÂ° 1291, Vitacura", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0292_Santa Amalia Esq. La Florida", "address": "Av. La Florida 9497 (Santa Amalia) (Urgencia)", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0069_Ahumada 266", "address": "Paseo Ahumada 226", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0091_Luis Pasteur/Lo Arcaya", "address": "Luis Pasteur NÂ°5875/ Lo Arcaya", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0593_Jumbo San Bernardo", "address": "Av. Portales NÂº 3698, local NÂ°1236.", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0002_Jumbo Bilbao", "address": "Bilbao NÂ° 4144 Local 200, Jumbo Bilbao", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0453_Lider Puente Nuevo", "address": "Av. Las Condes NÂ° 12916, Lo Barnechea", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0284_Macul 2555", "address": "Av. Macul NÂ°2555 / Gregorio de la Fuente (Urgencia)", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0652_Tottus Vivaceta", "address": "Av. FermÃ­n Vivaceta 1018-1030 L8 y 9, Independecia", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0399_Lider El Bosque", "address": "Riquelme NÂ°69, El Bosque", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0656 Costanera Center Spa, Providencia", "address": "Av. Andres Bello 2447, Local 192 (Costanera Center )", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0015_Irarrazaval 4221", "address": "IrarrÃ¡zaval NÂ° 4221 / Juan Moya (Urgencia)", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0350_Nataniel NÂ° 620 (Supermercado S", "address": "Nataniel Cox 620, Locales 1-2-3", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0011_Parque Arauco", "address": "Kennedy NÂ° 5413 Local 230 / Parque Arauco", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0551_", "address": "Americo Vespucio 1501 Local 270-274", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0081_RamÃ³n Freire 2340 Maipu", "address": "Av. Pajaritos NÂ° 2340", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0203_Bilbao-Holanda", "address": "Av. Francisco Bilbao 2489 / Holanda", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0553_Salvador con Sucre", "address": "Av.Salvador 1866, Local 1(esquina Sucre)", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0300_Los Trapenses 3515", "address": "Av. Los Trapenses 3515", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0237_Jumbo La Florida", "address": "Av. VicuÃ±a Mackenna NÂ° 6100 L. 102 (Jumbo La Florida)", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0343_Av.Chicureo El Castillito Pc 13", "address": "Camino Chicureo Esq. Los Ingleses Local 1, Chicureo", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0243_Mall La Dehesa", "address": "Avda. El Rodeo NÂ° 12.850, Local 45 al 47", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0239_P.Hurtado/Bilbao", "address": "Avda. Francisco Bilbao NÂ°8898 (Portal la Reina), local 3061", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0525_Calle Bernardino Bravo 115, Buin,", "address": "Bernardino Bravo NÂ°0115", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0439_Lider La Serena", "address": "Av. Francisco de Aguirre NÂ°2", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0032_Luis Carrera 2215", "address": "Luis Carrera NÂ° 2215 / Candelaria Goyenechea", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0467_NEPTUNO NÂ°720", "address": "Av. Neptuno NÂ° 720, Lo Prado", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0337_Los Militares / Nuestra SeÃ±ora Del", "address": "Los Militares NÂ° 6872, local 9, Las Condes", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0520_Av.Camino de las Flores 20217, Pud", "address": "Camino las Flores 20217, Ciudad de los Valles", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0644_Balmaceda, Buin", "address": "Calle Jose Manuel Balmaceda NÂ° 124 Local 1, Buin.", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0517_Camino El Alba NÂº 11969, TrasCajas", "address": "Camino el Alba NÂº11.969, Local 104 - Interior Jumbo", "region": "RegiÃ³n de Metropolitana"}, {"name": "L0524_Av.SÃ¡nchez Fontecilla 12000 L/1061", "address": "Av. Mariano Sanchez Fontecilla NÂ° 12.000, local 1061 (Jumbo PeÃ±alolÃ©n)", "region": "RegiÃ³n de Metropolitana"}], "RegiÃ³n de ValparaÃ­so": [{"name": "L0145_Libertad 335 ViÃ±a", "address": "Av. Libertad NÂ°335 (Urgencia)", "region": "RegiÃ³n de ValparaÃ­so"}, {"name": "L0669_Lider PeÃ±ablanca", "address": "Camino Troncal NÂ°1561, Local 1, PeÃ±ablanca", "region": "RegiÃ³n de ValparaÃ­so"}, {"name": "L0549_El Belloto Mall, QuilpuÃ©", "address": "Avenida RamÃ³n Freire NÂ° 2414, Local NÂ° 1082, Portal El Belloto", "region": "RegiÃ³n de ValparaÃ­so"}, {"name": "L0583_Shell Placilla", "address": "Caletera NÂ° 1502, Local 3. Ruta 68 Placilla", "region": "RegiÃ³n de ValparaÃ­so"}, {"name": "L0537_Domingo Ortiz de Rozas 476 L/ 2y3", "address": "Domingo Ortiz de Rosas NÂ° 476 Local 2 y 3", "region": "RegiÃ³n de ValparaÃ­so"}, {"name": "L0219_Mall QuilpuÃ©", "address": "Diego Portales NÂ° 802 Loc. 3 Mall Plaza El Sol", "region": "RegiÃ³n de ValparaÃ­so"}, {"name": "L0149_Prat 798 S.Felipe", "address": "Arturo Prat NÂº 798", "region": "RegiÃ³n de ValparaÃ­so"}, {"name": "Lautaro 78-Ruta 60ch 13420 _L0684", "address": "Lautaro 78 Local 1-2, La Calera", "region": "RegiÃ³n de ValparaÃ­so"}], "RegiÃ³n de Magallanes (y de la AntÃ¡rtica Chilena)": [{"name": "L0233_Bories 950 P.Arenas", "address": "Gobernador Carlos Gories 950 - 958", "region": "RegiÃ³n de Magallanes (y de la AntÃ¡rtica Chilena)"}, {"name": "L0241_A.EspaÃ±a 1405 P. Arenas", "address": "Avda. EspaÃ±a 01405-A", "region": "RegiÃ³n de Magallanes (y de la AntÃ¡rtica Chilena)"}, {"name": "L0367_Puerto Natales", "address": "Manuel Bulnes NÂº 599, Puerto Natales", "region": "RegiÃ³n de Magallanes (y de la AntÃ¡rtica Chilena)"}], "RegiÃ³n de AysÃ©n(AysÃ©n del General Carlos IbÃ¡Ã±ez del Campo)": [{"name": "L0330_Fco Bilbao 307 (Esq Partt) Coyhaiq", "address": "Bilbao NÂ° 317, Coyhaique", "region": "RegiÃ³n de AysÃ©n(AysÃ©n del General Carlos IbÃ¡Ã±ez del Campo)"}], "RegiÃ³n de O'Higgins (Libertador General Bernardo Oâ€™Higgins)": [{"name": "L0535_Avda. San Juan NÂ°113B-113C-113D, M", "address": "Avda. San Juan NÂ°113B-113C-113D, MachalÃ­", "region": "RegiÃ³n de O'Higgins (Libertador General Bernardo Oâ€™Higgins)"}, {"name": "L0623_Tottus ConcÃ³n", "address": "Avenida Manantiales NÂº 955, local 104.", "region": "RegiÃ³n de O'Higgins (Libertador General Bernardo Oâ€™Higgins)"}, {"name": "L0400_Lider Rancagua", "address": "Av. Eduardo Frei Montalva NÂ° 190, Rancagua", "region": "RegiÃ³n de O'Higgins (Libertador General Bernardo Oâ€™Higgins)"}, {"name": "L0698_Dunas Concon", "address": "Av. Gaston Hamel Nieto NÂ°527 lote 6 La foresta de la Costa II ReÃ±aca, local 121", "region": "RegiÃ³n de O'Higgins (Libertador General Bernardo Oâ€™Higgins)"}], "RegiÃ³n de Antofagasta": [{"name": "L0121_Prat 605 Antof.", "address": "Arturo Prat NÂº 605", "region": "RegiÃ³n de Antofagasta"}, {"name": "L0124_Zenteno 21 Antofagasta", "address": "Zenteno NÂ° 21 Local 1, Megamercado LÃ­der", "region": "RegiÃ³n de Antofagasta"}, {"name": "L0617_Stripcenter Arauco Express, Antofa", "address": "Av Edmundo Perez Zujovic NÂ° 5470", "region": "RegiÃ³n de Antofagasta"}, {"name": "L0258_Balmaceda 3242 Calama", "address": "Mall Calama (Av. Balmaceda NÂ° 3242 / Loc. A120-124-120b)", "region": "RegiÃ³n de Antofagasta"}, {"name": "L0589_Punto Encuentro Antofagasta", "address": "Pedro Aguirre Cerda NÂº 9400.", "region": "RegiÃ³n de Antofagasta"}], "RegiÃ³n de Maule": [{"name": "L0581_Jumbo Talca", "address": "El Arenal #411, talca local 1027", "region": "RegiÃ³n de Maule"}, {"name": "L0171_Independencia 535 Linares", "address": "Independencia nÂº 535", "region": "RegiÃ³n de Maule"}, {"name": "L0361_Parral", "address": "AnÃ­bal Pinto NÂ° 640, Parral", "region": "RegiÃ³n de Maule"}, {"name": "L0172_PeÃ±a 724 Curico", "address": "PeÃ±a nÂº 724", "region": "RegiÃ³n de Maule"}, {"name": "L0349_Jesus Pons NÂ° 409 Curico", "address": "JesÃºs Pons 409, CuricÃ³", "region": "RegiÃ³n de Maule"}, {"name": "L0402_Lider Curico", "address": "Carmen 1190-1196 Local 101-125", "region": "RegiÃ³n de Maule"}], "RegiÃ³n de BiobÃ­o": [{"name": "L0191_Colon 8961 Talcahuano", "address": "Av. ColÃ³n NÂ° 8961 / Nueva Imperial", "region": "RegiÃ³n de BiobÃ­o"}, {"name": "L0276_Mall El Trebol Talcahuano", "address": "J. Alessandri  3177 (Mall El Trebol)", "region": "RegiÃ³n de BiobÃ­o"}, {"name": "L0195_Irarraz 501 Concepcion", "address": "Juan Bosco NÂ° 501 (Urgencia)", "region": "RegiÃ³n de BiobÃ­o"}, {"name": "L0240_Barros 724 Concepcion", "address": "Barros Arana nÂº 724 - 734", "region": "RegiÃ³n de BiobÃ­o"}, {"name": "L0280_San Pedro Concepcion", "address": "Michimalonco NÂ°1120, locales 1 y 2", "region": "RegiÃ³n de BiobÃ­o"}], "RegiÃ³n de Los RÃ­os": [{"name": "L0702_Plaza de los Rios", "address": "Calle Arauco 561 local 144", "region": "RegiÃ³n de Los RÃ­os"}, {"name": "L0444_Lider Valdivia", "address": "Buera 1400, Valdivia", "region": "RegiÃ³n de Los RÃ­os"}], "RegiÃ³n de Los Lagos": [{"name": "L0221_Mall Puerto Montt", "address": "Juan Soler Manfredini NÂ°51, Local 114 y 115 (Mall Paseo Costanera)", "region": "RegiÃ³n de Los Lagos"}, {"name": "L0450 San Francisco 350 Puerto Varas", "address": "San Francisco 350", "region": "RegiÃ³n de Los Lagos"}, {"name": "L0443_Lider Puerto Montt", "address": "Av. Parque Industrial NÂ° 400, interior Sup. Lider Puerto Montt", "region": "RegiÃ³n de Los Lagos"}], "RegiÃ³n de La AraucanÃ­a": [{"name": "L0744_", "address": "Av. Pablo Neruda 01725, Local 3", "region": "RegiÃ³n de La AraucanÃ­a"}, {"name": "L0320_Av. Alemania 0671, Local 2086", "address": "Avda. Alemania 0671, piso 2, Local NÂ° 2086", "region": "RegiÃ³n de La AraucanÃ­a"}, {"name": "L0622_Stripcenter Los Pablos, Temuco", "address": "Los Pablos  NÂ° 1880, local 9", "region": "RegiÃ³n de La AraucanÃ­a"}, {"name": "L0492_LAGOS NÂº 567 VICTORIA", "address": "Lagos NÂ° 567, Victoria", "region": "RegiÃ³n de La AraucanÃ­a"}], "RegiÃ³n de Coquimbo": [{"name": "L0134_Cordovez 631 Serena", "address": "Cordovez 631-651", "region": "RegiÃ³n de Coquimbo"}, {"name": "L0232_Mall La Serena", "address": "Alberto Solari NÂ°1400, Local 2021 y 2025", "region": "RegiÃ³n de Coquimbo"}, {"name": "L0567_LÃ­der 4 Esquinas, La Serena", "address": "Avda. Guillermo Ulriksen 3128 Local # 2", "region": "RegiÃ³n de Coquimbo"}, {"name": "L0441_Lider Coquimbo", "address": "Av. Domeyko NÂ° 55 local 1, Coquimbo", "region": "RegiÃ³n de Coquimbo"}, {"name": "L0137_Shell La Serena", "address": "Balmaceda NÂ° 3463", "region": "RegiÃ³n de Coquimbo"}, {"name": "L0474_LÃ­der Balmaceda (La Serena)", "address": "Av. Balmaceda NÂ° 2154, La Serena", "region": "RegiÃ³n de Coquimbo"}], "RegiÃ³n de Atacama": [{"name": "L0621_Lider Copiapo", "address": "Avda. Los Carrera NÂº 3791/esq. El Inca. Interior Sup. LÃ­der.", "region": "RegiÃ³n de Atacama"}], "RegiÃ³n de Ã‘uble": [{"name": "L0478_Av Collin NÂº 698 Chillan", "address": "Av. CollÃ­n NÂ° 698, ChillÃ¡n", "region": "RegiÃ³n de Ã‘uble"}], "RegiÃ³n Metropolitana": [{"name": "L0033_El Bosque 164", "address": "Av. El Bosque NÂ° 164 / Lota, Providencia", "region": "RegiÃ³n Metropolitana"}]};

  function normalize(s){
    if(!s) return "";
    return String(s)
      .replace(/\bAv\.?\b/gi, "Avenida")
      .replace(/\bPje\b/gi, "Pasaje")
      .replace(/\bNÂº|NÂ°|#\b/gi, "")
      .replace(/\bs\/?n\b/gi, "")
      .replace(/\s+/g, " ")
      .trim();
  }

  function mapsUrl(f){
    const parts = [f.name, f.address, f.region, "Chile"].filter(Boolean).map(normalize);
    const q = parts.join(", ");
    return `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(q)}`;
  }

  const regionsEl = document.getElementById('regions');
  const q = document.getElementById('q');

  function render(filter=""){
    regionsEl.innerHTML = "";
    const filterLC = filter.trim().toLowerCase();
    const regions = Object.keys(DATA).sort((a,b)=>a.localeCompare(b,'es'));
    regions.forEach(region=>{
      const list = DATA[region] || [];
      const sorted = list.slice().sort((a,b)=> (a.name||'').localeCompare(b.name||'', 'es'));
      const filtered = sorted.filter(f=> {
        if(!filterLC) return true;
        return (String(f.name||"").toLowerCase().includes(filterLC)
             || String(f.address||"").toLowerCase().includes(filterLC)
             || String(region||"").toLowerCase().includes(filterLC));
      });
      if(filterLC && !filtered.length) return;

      const det = document.createElement('details');
      det.className = 'region';
      const sum = document.createElement('summary');
      sum.innerHTML = `${region} <span class="pill">${list.length}</span>`;
      det.appendChild(sum);

      const cont = document.createElement('div');
      cont.className = 'list';

      (filterLC ? filtered : sorted).forEach(f=>{
        const row = document.createElement('div');
        row.className = 'item';
        const name = f.name ? String(f.name) : "";
        const addr = f.address ? String(f.address) : "";
        row.innerHTML = `
          <b>${name}</b>
          ${addr ? `<div class="muted">${addr}</div>` : ""}
          <div style="margin-top:8px">
            <a class="btn" target="_blank" rel="noreferrer" href="${mapsUrl(f)}">Ver en Google Maps</a>
          </div>`;
        cont.appendChild(row);
      });

      det.appendChild(cont);
      regionsEl.appendChild(det);
    });
  }

  document.getElementById('expandAll').onclick = () => document.querySelectorAll('details.region').forEach(d => d.open = true);
  document.getElementById('collapseAll').onclick = () => document.querySelectorAll('details.region').forEach(d => d.open = false);
  q.addEventListener('input', () => render(q.value));
  render();
</script>
</body>
</html>
